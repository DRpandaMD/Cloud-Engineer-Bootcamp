# I/O Monitoring

[Home](/README.md)

Learn this:

* Understand the importance of monitoring I/O activity and when it constitutes system performance bottlenecks.

* Use `iostat` to monitor system I/O device activity.
* Use `iotop` to display a constantly updated table of current I/O usage.
* Use `ionice` to set both the I/O scheduling class and the priority for a given process.


## I/O Monitoring and Disk Bottlenecks

As a rule, a system can be considered as I/O-bound when the CPU is found sitting idle waiting for I/O to complete, or the network is waiting to clear buffers.

However, one can be misled. What appears to be insufficient memory can result from too slow I/O; if memory buffers that are being used for reading and writing fill up, it may appear that memory is the problem, when the real problem is that buffers are not filling up or emptying out fast enough. Similarly, network transfers may be waiting for I/O to complete and cause network throughput to suffer.

## iostat

* like `vmstat`, `iostat` is the basic monitoring tool used.
  * `iostat [OPTIONS] [devices] [interval] [count]`

* A different display is generated by giving the -k option, which shows results in KB instead of blocks. You can also use -m to get results in MB.
  * `isostat -k`

* another option is to use `-N` for device name or `-d`
  * `isostat -N`

While looking at these it is important to note *that if the utilization percentage approaches 100, the system is saturated, or I/O bound.*

## iotop

* surprise! its the I/O version of `top` see [iotop](https://linux.die.net/man/1/iotop)

## ionice

* The `ionice` utility lets you set both the I/O scheduling class and priority for a given process. It takes the form:
  * `ionice [-c class] [-n priority] [-p pid ] [COMMAND [ARGS] ]`

NOTE *ionice works only when using the CFQ I/O Scheduler, which was removed in the 5.0 kernel version.*